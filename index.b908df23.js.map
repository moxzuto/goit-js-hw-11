{"mappings":"AAAA,MACMA,EAAaC,SAASC,cAAc,gBACpCC,EAAcF,SAASC,cAAc,cACrCE,EAAcH,SAASC,cAAc,YAE3C,IAAIG,EAAc,GACdC,EAAO,EAEX,MA0BMC,EAAc,IAGXC,MAFK,qEAA6CH,kEAA4EC,iBAGlIG,MAAMC,IACL,GAAIA,EAASC,GACX,OAAOD,EAASE,OAGlB,MAAM,IAAIC,MAAM,8BAA8B,IAE/CJ,MAAMK,IACL,MAAMC,EAASD,EAAKE,KAEpB,GAAsB,IAAlBD,EAAOE,OACTC,SAASC,OAAOC,QAAQ,gFACnB,CACL,MAAMC,EAAqBN,EAAOO,KAAKC,GA3Cf,CAACA,IAC/B,MAAMC,aAAEA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,GAAcP,EAEjF,MAAO,6CACSC,WAAsBE,gJAI5BC,kHAIAC,+GAIAC,sHAIAC,2CAGD,EAoB8CC,CAAwBR,KAAQS,KAAK,IACtF5B,EAAY6B,mBAAmB,YAAaZ,GAGhC,MAAJa,OAAQC,GAAe/B,EAAYgC,kBAAkBC,wBAC7DC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,WAGR1B,EAAOE,OAAS,IAClBC,SAASC,OAAOuB,KAAK,8DACrBvC,EAAYwC,UAAUC,IAAI,cAE1BzC,EAAYwC,UAAUE,OAAO,Y,KAIlCC,OAAOC,IACNC,QAAQD,MAAM,yBAA0BA,GACxC7B,SAASC,OAAO8B,QAAQ,sDAAsD,IAKpFjD,EAAWkD,iBAAiB,UAAWC,IACrCA,EAAMC,iBAEN,MAAMC,EAAQF,EAAMG,cAAcC,SAASC,YAEtCH,EAAMI,QAIXpD,EAAcgD,EAAMI,MAAMC,OAC1BpD,EAAO,EAEPF,EAAYuD,UAAY,GACxBxD,EAAYwC,UAAUC,IAAI,aAE1BrC,IAAa,IAGfJ,EAAY+C,iBAAiB,SAAS,KACpC5C,GAAQ,EAERC,GAAa,IAKf,IAAIqD,GAAU,EAedtB,OAAOY,iBAAiB,UAbH,KACnB,MAAMW,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiB9D,SAAS+D,gBACxCH,EAAYE,GAAgBD,EAAe,KAE3CF,IACjBA,GAAU,EACVtD,GAAQ,EACRC,IAAc0D,SAAQ,KACpBL,GAAU,CAAK,I","sources":["src/index.js"],"sourcesContent":["const API_KEY = \"35738643-c5bfe559c2bde2990bd981af5\";\nconst searchForm = document.querySelector(\"#search-form\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst galleryList = document.querySelector(\".gallery\");\n\nlet searchQuery = \"\";\nlet page = 1;\n\nconst createGalleryItemMarkup = (image) => {\n  const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n\n  return `<div class=\"photo-card\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"stats\">\n        <p class=\"stats-item\">\n          <i class=\"material-icons\">thumb_up</i>\n          ${likes}\n        </p>\n        <p class=\"stats-item\">\n          <i class=\"material-icons\">visibility</i>\n          ${views}\n        </p>\n        <p class=\"stats-item\">\n          <i class=\"material-icons\">comment</i>\n          ${comments}\n        </p>\n        <p class=\"stats-item\">\n          <i class=\"material-icons\">cloud_download</i>\n          ${downloads}\n        </p>\n      </div>\n    </div>`;\n};\n\nconst fetchImages = () => {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n\n  return fetch(url)\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error(\"Network response was not ok\");\n    })\n    .then((data) => {\n      const images = data.hits;\n\n      if (images.length === 0) {\n        Notiflix.Notify.warning(\"Sorry, there are no images matching your search query. Please try again.\");\n      } else {\n        const galleryItemsMarkup = images.map((image) => createGalleryItemMarkup(image)).join(\"\");\n        galleryList.insertAdjacentHTML(\"beforeend\", galleryItemsMarkup);\n\n        // плавный скрол\n        const { height: cardHeight } = galleryList.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: \"smooth\",\n        });\n\n        if (images.length < 40) {\n          Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n          loadMoreBtn.classList.add(\"is-hidden\");\n        } else {\n          loadMoreBtn.classList.remove(\"is-hidden\");\n        }\n      }\n    })\n    .catch((error) => {\n      console.error(\"Error fetching images:\", error);\n      Notiflix.Notify.failure(\"Oops! Something went wrong. Please try again later.\");\n    });\n};\n\n\nsearchForm.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n\n  const input = event.currentTarget.elements.searchQuery;\n\n  if (!input.value) {\n    return;\n  }\n\n  searchQuery = input.value.trim();\n  page = 1;\n\n  galleryList.innerHTML = \"\";\n  loadMoreBtn.classList.add(\"is-hidden\");\n\n  fetchImages();\n});\n\nloadMoreBtn.addEventListener(\"click\", () => {\n  page += 1;\n\n  fetchImages();\n});\n\n\n// загрузка\nlet loading = false;\n\nconst handleScroll = () => {\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n  const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10;\n\n  if (isAtBottom && !loading) {\n    loading = true;\n    page += 1;\n    fetchImages().finally(() => {\n      loading = false;\n    });\n  }\n};\n\nwindow.addEventListener(\"scroll\", handleScroll);\n"],"names":["$1f0dc3b9307be026$var$searchForm","document","querySelector","$1f0dc3b9307be026$var$loadMoreBtn","$1f0dc3b9307be026$var$galleryList","$1f0dc3b9307be026$var$searchQuery","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$fetchImages","fetch","then","response","ok","json","Error","data","images","hits","length","Notiflix","Notify","warning","galleryItemsMarkup","map","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$1f0dc3b9307be026$var$createGalleryItemMarkup","join","insertAdjacentHTML","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","info","classList","add","remove","catch","error","console","failure","addEventListener","event","preventDefault","input","currentTarget","elements","searchQuery","value","trim","innerHTML","$1f0dc3b9307be026$var$loading","scrollTop","scrollHeight","clientHeight","documentElement","finally"],"version":3,"file":"index.b908df23.js.map"}