{"mappings":"YAAA,IACMA,EAAaC,SAASC,cAAc,gBACpCC,EAAcF,SAASC,cAAc,cACrCE,EAAcH,SAASC,cAAc,YAEvCG,EAAc,GACdC,EAAO,EA4BLC,EAAc,WAClB,IAAMC,EAAM,gCAA6CC,OAnC3C,qCAmCsC,OAAiFA,OAA5EJ,EAAY,kEAAqEI,OAALH,EAAK,gBAE1I,OAAOI,MAAMF,GACVG,MAAK,SAACC,GACL,GAAIA,EAASC,GACX,OAAOD,EAASE,OAGlB,MAAM,IAAIC,MAAM,8B,IAEjBJ,MAAK,SAACK,GACL,IAAMC,EAASD,EAAKE,KAEpB,GAAsB,IAAlBD,EAAOE,OACTC,SAASC,OAAOC,QAAQ,gFACnB,CACL,IAAMC,EAAqBN,EAAOO,KAAI,SAACC,G,OA3Cf,SAACA,GAC/B,IAAQC,EAAyED,EAAzEC,aAA6BC,GAA4CF,EAA3DG,cAA2DH,EAA5CE,MAAME,EAAsCJ,EAAtCI,MAAOC,EAA+BL,EAA/BK,MAAOC,EAAwBN,EAAxBM,SAAUC,EAAcP,EAAdO,UAEnE,MAAO,6CAC+BvB,OAAtBiB,EAAa,WAInBjB,OAJ4BkB,EAAK,gJAQjClB,OAJAoB,EAAM,kHAQNpB,OAJAqB,EAAM,+GAQNrB,OAJAsB,EAAS,sHAICtB,OAAVuB,EAAU,2C,CAuBmCC,CAAwBR,E,IAAQS,KAAK,IACtF9B,EAAY+B,mBAAmB,YAAaZ,GAGhC,IAAJa,EAAuBhC,EAAYiC,kBAAkBC,wBAArDC,OACRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,WAGR1B,EAAOE,OAAS,IAClBC,SAASC,OAAOuB,KAAK,8DACrBzC,EAAY0C,UAAUC,IAAI,cAE1B3C,EAAY0C,UAAUE,OAAO,Y,KAIlCC,OAAM,SAACC,GACNC,QAAQD,MAAM,yBAA0BA,GACxC7B,SAASC,OAAO8B,QAAQ,sD,KAK9BnD,EAAWoD,iBAAiB,UAAU,SAACC,GACrCA,EAAMC,iBAEN,IAAMC,EAAQF,EAAMG,cAAcC,SAASC,YAEtCH,EAAMI,QAIXtD,EAAckD,EAAMI,MAAMC,OAC1BtD,EAAO,EAEPF,EAAYyD,UAAY,GACxB1D,EAAY0C,UAAUC,IAAI,aAE1BvC,I,IAGFJ,EAAYiD,iBAAiB,SAAS,WACpC9C,GAAQ,EAERC,G,IAKF,IAAIuD,GAAU,EAedtB,OAAOY,iBAAiB,UAbH,WACnB,IAAkDW,EAAA9D,SAAS+D,gBAAnDC,EAA0CF,EAA1CE,UAAWC,EAA+BH,EAA/BG,aACAD,EAD+BF,EAAjBI,cACcD,EAAe,KAE3CJ,IACjBA,GAAU,EACVxD,GAAQ,EACRC,IAAc6D,SAAQ,WACpBN,GAAU,C","sources":["src/index.js"],"sourcesContent":["const API_KEY = \"35738643-c5bfe559c2bde2990bd981af5\";\nconst searchForm = document.querySelector(\"#search-form\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst galleryList = document.querySelector(\".gallery\");\n\nlet searchQuery = \"\";\nlet page = 1;\n\nconst createGalleryItemMarkup = (image) => {\n  const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n\n  return `<div class=\"photo-card\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"stats\">\n        <p class=\"stats-item\">\n          <i class=\"material-icons\">thumb_up</i>\n          ${likes}\n        </p>\n        <p class=\"stats-item\">\n          <i class=\"material-icons\">visibility</i>\n          ${views}\n        </p>\n        <p class=\"stats-item\">\n          <i class=\"material-icons\">comment</i>\n          ${comments}\n        </p>\n        <p class=\"stats-item\">\n          <i class=\"material-icons\">cloud_download</i>\n          ${downloads}\n        </p>\n      </div>\n    </div>`;\n};\n\nconst fetchImages = () => {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n\n  return fetch(url)\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error(\"Network response was not ok\");\n    })\n    .then((data) => {\n      const images = data.hits;\n\n      if (images.length === 0) {\n        Notiflix.Notify.warning(\"Sorry, there are no images matching your search query. Please try again.\");\n      } else {\n        const galleryItemsMarkup = images.map((image) => createGalleryItemMarkup(image)).join(\"\");\n        galleryList.insertAdjacentHTML(\"beforeend\", galleryItemsMarkup);\n\n        // плавный скрол\n        const { height: cardHeight } = galleryList.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: \"smooth\",\n        });\n\n        if (images.length < 40) {\n          Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n          loadMoreBtn.classList.add(\"is-hidden\");\n        } else {\n          loadMoreBtn.classList.remove(\"is-hidden\");\n        }\n      }\n    })\n    .catch((error) => {\n      console.error(\"Error fetching images:\", error);\n      Notiflix.Notify.failure(\"Oops! Something went wrong. Please try again later.\");\n    });\n};\n\n\nsearchForm.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n\n  const input = event.currentTarget.elements.searchQuery;\n\n  if (!input.value) {\n    return;\n  }\n\n  searchQuery = input.value.trim();\n  page = 1;\n\n  galleryList.innerHTML = \"\";\n  loadMoreBtn.classList.add(\"is-hidden\");\n\n  fetchImages();\n});\n\nloadMoreBtn.addEventListener(\"click\", () => {\n  page += 1;\n\n  fetchImages();\n});\n\n\n// загрузка\nlet loading = false;\n\nconst handleScroll = () => {\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n  const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10;\n\n  if (isAtBottom && !loading) {\n    loading = true;\n    page += 1;\n    fetchImages().finally(() => {\n      loading = false;\n    });\n  }\n};\n\nwindow.addEventListener(\"scroll\", handleScroll);\n"],"names":["$b8f9b7833fa37166$var$searchForm","document","querySelector","$b8f9b7833fa37166$var$loadMoreBtn","$b8f9b7833fa37166$var$galleryList","$b8f9b7833fa37166$var$searchQuery","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$fetchImages","url","concat","fetch","then","response","ok","json","Error","data","images","hits","length","Notiflix","Notify","warning","galleryItemsMarkup","map","image","webformatURL","tags","largeImageURL","likes","views","comments","downloads","$b8f9b7833fa37166$var$createGalleryItemMarkup","join","insertAdjacentHTML","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","info","classList","add","remove","catch","error","console","failure","addEventListener","event","preventDefault","input","currentTarget","elements","searchQuery","value","trim","innerHTML","$b8f9b7833fa37166$var$loading","_documentElement","documentElement","scrollTop","scrollHeight","clientHeight","finally"],"version":3,"file":"index.d3eda611.js.map"}